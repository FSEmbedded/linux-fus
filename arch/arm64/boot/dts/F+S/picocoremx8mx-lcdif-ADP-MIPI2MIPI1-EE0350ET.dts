/*
* Copyright (C) 2019 F&S Elektronik Systeme GmbH
*
* This program is free software; you can redistribute it and/or modify
* it under the terms of the GNU General Public License version 2 as
* published by the Free Software Foundation.
*/

#include "picocoremx8mm-bbdsi.dts"

&lcdif {
	status = "okay";
};

&mipi_dsi {
	status = "okay";

	panel@0 {
		compatible = "eagleeyetech,ee0350et-2";
		reg = <0>;
		reset-gpios = <&pca963x 3 GPIO_ACTIVE_HIGH>;
		//iovcc-supply = <&reg_vref_1v8>;
		vci-supply = <&reg_vlcd>;
		status = "okay";
	};
};


&i2c2 {
	/* Atmel PCAP touch on Touch Connector (I2C) */
	mxt336u@4a {
		compatible = "atmel,maxtouch";
		reg = <0x4a>;
		interrupt-parent = <&gpio4>;
		interrupts = <31 IRQ_TYPE_EDGE_FALLING>;
		atmel,cfg_name = "atmel/mxt336u.cfg";
		reset-gpios = <&pca963x 2 0>;
	};

	pca963x: pca9632@60 {
			compatible = "nxp,pca9632";
			reg = <0x60>;
			nxp,totem-pole;
			#address-cells = <1>;
			#size-cells = <0>;
			#pwm-cells = <3>;
			#gpio-cells = <2>;
			led@0 {
				reg = <0>;
				label = "1-LEDCTRL";
				type = "PWM";
				default-on;		/* or: keep-value */
				active-low;
			};
			led@1 {
				reg = <1>;
				label = "0-PWRCTL";
				type = "GPIO";
				default-on;		/* or: keep-value */
				active-high;
			};
			led@2 {
				reg = <2>;
				label = "2-TOUCH-RST";
				type = "GPIO";
				active-low;
			};
			led@3 {
				reg = <3>;
				label = "2-MIPI-RST";
				type = "GPIO";
				active-low;
			};
		};
};

/ {

	regulators {
		reg_ldb_bl {
			gpio = <&pca963x 1 GPIO_ACTIVE_HIGH>;
		};
	};

	backlight_ldb {
		pwms = <&pca963x 0 640000 0>;
		brightness-levels = <0 1 5 10 18 28 41 56
				     73 92 113 137 163 192 222 255>;
		default-brightness-level = <14>;
	};
};

